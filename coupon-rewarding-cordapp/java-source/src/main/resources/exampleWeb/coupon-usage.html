<!DOCTYPE html>
<html lang="en">
<head>
    <title>Hello</title>
    <!--<link rel=StyleSheet href="default.css" TYPE="text/css">-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript">

        function getCoupons() {
            var xmlHttpReq = new XMLHttpRequest();
            xmlHttpReq.onreadystatechange = function() {
                if(this.readyState == 4) {
                    alert(this.responseText);
                    document.getElementById("coupons").innerHTML = this.responseText;
                }
            };
           xmlHttpReq.open("GET", "http://localhost:10012/api/rewards/coupon-amount/", true);
            xmlHttpReq.send();
        }


         function useCoupon() {

             xmlHttpReq = new XMLHttpRequest();
             xmlHttpReq.open("POST", "http://localhost:10015/api/rewards/coupon-redemption/", true);
             xmlHttpReq.onreadystatechange = displayResponse;
             xmlHttpReq.setRequestHeader("Content-Type", "application/json");
             var couponId = document.getElementById("couponId").value;
             var amount = document.getElementById("amount").value;
             var username = document.getElementById("email").value;
             var data = JSON.stringify({"couponId": couponId, "userName": username, "value": amount});
             xmlHttpReq.send(data);
         }

         function displayResponse() {

          if(xmlHttpReq.readyState == 4  ) {
          alert(xmlHttpReq.responseText);
         document.getElementById("result").innerHTML = xmlHttpReq.responseText;
         }

         }
      </script>
    <style>
        body {
         background-color: grey;
         }
    </style>
</head>
<body background="simple.jpg">
<div class="bg">
    <center>
        <h1>Welcome To AmazonPay </h1>

        <input type ="button" class="btn btn-primary" name = "display" id ="display" value = "show Coupon" onclick ="getCoupons();"/>

        <div id ="coupons">

        </div>


        <br/>
        <table>
            <tr>
                <!--<td>Enter Amount</td>-->
                <td><label class="text-white">Coupon Id</label></td>
                <td><input type ="text" class="form-control input-sm" name="couponId" id ="couponId" placeholder="Enter coupon id"></td>
            </tr>
            <tr>
                <td><label class="text-white">Amount</label></td>
                <td><input type ="text" class="form-control input-sm" name="amount" id ="amount" placeholder="Enter Amount"></td>
            </tr>
            <tr>
                <td><label for="email" class="text-white">email</label></td>
                <td><input type ="email" class="form-control input-sm" name="email" id ="email" placeholder="Enter your email id"></td>
            </tr>
        </table>
        <td><input type ="button" class="btn btn-primary" name = "coupon" id ="coupon" value = "Redeem Coupon" onclick ="useCoupon();"></td>
    </center>
</div>
<center>
<div id="result" class="collapse" style="background-color:white"></div>
</center>
</body>
</html>