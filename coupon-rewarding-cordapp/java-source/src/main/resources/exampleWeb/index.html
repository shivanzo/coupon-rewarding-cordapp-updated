<!DOCTYPE html>
<html lang="en">
<head>
    <title>Hello</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript">
         function getCoupons() {
            var xmlHttpReq = new XMLHttpRequest();
            xmlHttpReq.onreadystatechange = function() {
                if(this.readyState == 4) {
                    document.getElementById("coupons").innerHTML = this.responseText;
                }
            };
           xmlHttpReq.open("GET", "http://localhost:10009/api/rewards/coupon-amount/", true);
            xmlHttpReq.send();
         }



         function genCoupon() {

             xmlHttpReq = new XMLHttpRequest();
             xmlHttpReq.open("POST", "http://localhost:10009/api/rewards/coupon-generations/", true);
             xmlHttpReq.onreadystatechange = displayResponse;
             xmlHttpReq.setRequestHeader("Content-Type", "application/json");
             var amount = document.getElementById("amt").value;
             var username = document.getElementById("username").value;
             var party = document.getElementById("party").value;
             var couponName = document.getElementById("coupon-name").value;
             var data = JSON.stringify({"partyName": party, "value": amount, "userName": username, "couponName": couponName});
             xmlHttpReq.send(data);
         }

         function displayResponse() {

         if(xmlHttpReq.readyState == 4  ) {
            alert(xmlHttpReq.responseText);
         document.getElementById("result").innerHTML = xmlHttpReq.responseText;
         getCoupons();

         }

         }


      </script>
    <style>
         body {
         background-color:white;
         }

         table, th, td {

  border-collapse: collapse;
}

         th, td {
  padding: 15px;
  text-align: left;
  background-color: #f1f1c1;

}



      </style>
</head>
<body>

    <center>
        <h1>Welcome To Netmeds.com </h1>
        <br/>

        <div id ="coupons">

        </div>
        <br/>
        <table>
            <tr>
                <td><label for="amt" class="text-white">Coupon Amount : </label></td>
                <td><input type ="text" class="form-control input-sm" name="amt" id ="amt" placeholder="Enter Amount"></td>
            </tr>
            <tr>
                <td><label for="coupon-name" class="text-white">Coupon Name : </label></td>
                <td><input type ="text" class="form-control input-sm" name="coupon-name" id ="coupon-name" placeholder="Enter Coupon Name"></td>
            </tr>
            <tr>
                <td><label for="party" class="text-white">Vendor name : </label></td>
                <td>
                    <select class="form-control" name="party" id ="party" placeholder="Enter vendor name">
                        <option value="">select vendor</option>
                        <option value="O=Amazon, L=New York, C=US">Amazon</option>
                        <option value="">Paytm</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><label for="username" class="text-white">User name : </label></td>
                <td><input type ="email" class="form-control input-sm" name="username" id ="username" placeholder="Enter user name"></td>
            </tr>
        </table>
        <br/>
        <input type ="button" class="btn btn-info" data-toggle="collapse" data-target="#result" name = "coupon" id ="coupon" value = "Generate coupon" onclick ="genCoupon();">
    </center>

<br/>
<br/>
<center>
    <div id="result" class="collapse" style="background-color:white"></div>
</center>
</body>
</html>